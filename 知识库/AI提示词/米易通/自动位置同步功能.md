请你帮我优化 NewUniversalBaseDeviceHomeFragment，实现自动位置同步功能。具体需求如下：

### 核心功能
在蓝牙通讯模式下，当设备连接成功后自动获取手机定位，并通过指令下发给设备，实现设备位置同步功能。

### 参考实现
请参考 `BaseAdvancedSettingFragment` 中的位置同步实现逻辑：
- `isNeedSyncLocation()` 方法：判断是否需要同步位置的条件
- `showSyncInstallationLocationPopup()` 方法：位置获取和同步的完整流程
- `setInstallationLocation()` 方法：具体的位置同步指令下发逻辑

### 具体实现要求

1. **触发时机**：
   - 在 `onBleDeviceReady()` 方法中触发自动位置同步
   - 确保设备连接稳定后再执行

2. **产品类型判断**：
   - 只对特定产品类型启用自动位置同步（LR200、LB20S、U_R_1、U_I_1）
   - 参考 `BaseAdvancedSettingFragment.isNeedSyncLocation()` 的判断逻辑

3. **权限处理**：
   - 复用 `BaseAdvancedSettingFragment` 中的位置权限申请逻辑
   - 包括系统位置服务检查和APP定位权限检查

4. **位置获取**：
   - 使用 `LocationViewModel` 获取当前位置
   - 自动转换为设备所需的坐标格式（GCJ-02转WGS84等）

5. **指令下发**：
   - 复用 `setInstallationLocation()` 中的指令构建逻辑
   - 根据产品类型使用不同的指令格式：
     - U_R_1/U_I_1：使用 `IOTCommandType.MD_RAW` 
     - 其他：使用 `IOTCommandType.MD_SET_INSTALL_LOCATION`

6. **错误处理**：
   - 位置获取失败时的处理
   - 指令下发失败时的重试机制
   - 用户友好的提示信息

7. **UI交互**：
   - 显示位置同步进度提示
   - 成功/失败的用户反馈
   - 可选择性地提供手动禁用自动同步的选项

### 代码结构建议
- 新增 `autoSyncLocationIfNeeded()` 方法作为自动同步的入口
- 抽取位置相关的通用逻辑到基类或工具类
- 保持与现有架构的一致性（使用协程、ViewModel等）

### 注意事项
- 确保遵循项目的编码规范（Kotlin协程、Clean Code等）
- 保持向后兼容性，不影响现有功能
- 考虑性能优化，避免重复位置请求
- 添加必要的日志输出便于调试